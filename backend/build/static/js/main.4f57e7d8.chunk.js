(this.webpackJsonpmusic=this.webpackJsonpmusic||[]).push([[0],{27:function(e,t,n){e.exports=n(45)},32:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),l=n.n(c),s=(n(32),n(11)),o=n(1),i=n.n(o),u=n(4),m=n(3),p=n(9);n(38);function d(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.login}));function c(){return(c=Object(u.a)(i.a.mark((function n(){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/logout");case 2:return a=n.sent,n.next=5,a.json();case 5:!0===n.sent.res&&t({type:"SET_LOGIN",login:""}),localStorage.clear(),e.history.push("/login");case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=localStorage.getItem("login");e&&!n.length&&t({type:"SET_LOGIN",login:e})}),[n,t]),n?r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/account"},n)),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/logout",onClick:function(){return c.apply(this,arguments)}},"Log out"))))):r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/signup"},"Sign Up")))))}n(40);var f=n(5),E=(n(41),function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://ws.audioscrobbler.com//2.0/?method=chart.gettopartists&api_key=8d0e1a9d07a2dc19acb1ca07f031a4a6&limit=150&format=json");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,!(a=Math.random()*n.artists.artist.length-1)){e.next=16;break}return e.next=10,fetch("https://deezerdevs-deezer.p.rapidapi.com/search?q=".concat(n.artists.artist[Math.floor(a)].name),{method:"GET",headers:{"x-rapidapi-host":"deezerdevs-deezer.p.rapidapi.com","x-rapidapi-key":"99d2bc2f27msh29e5bdde481eea8p1947abjsnb6872fabc5dd"}});case 10:return r=e.sent,e.next=13,r.json();case 13:return c=e.sent,l=c.data[Math.floor(Math.random()*c.data.length-1)],e.abrupt("return",l);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),g=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.deezer.com/genre/".concat(t,"/artists"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent)){e.next=15;break}return e.next=9,fetch("https://deezerdevs-deezer.p.rapidapi.com/search?q=".concat(a.data[Math.floor(Math.random()*a.data.length-1)].name),{method:"GET",headers:{"x-rapidapi-host":"deezerdevs-deezer.p.rapidapi.com","x-rapidapi-key":"99d2bc2f27msh29e5bdde481eea8p1947abjsnb6872fabc5dd"}});case 9:return r=e.sent,e.next=12,r.json();case 12:return c=e.sent,l=c.data[Math.floor(Math.random()*c.data.length-1)],e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n(42);function h(e){var t=Object(m.c)((function(e){return e.song})),n=Object(m.c)((function(e){return e.genre})),a=Object(m.b)();var c=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"!==n){e.next=6;break}return e.next=3,E();case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,g(n);case 8:t=e.sent;case 9:t&&(a({type:"SET_SONG",song:t}),a({type:"CHANGE_MODAL",modal:!1}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(t)return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},e.isCorrect?r.a.createElement("div",null,"Correct answer!"):r.a.createElement("div",null,"Incorrect answer!"),r.a.createElement("img",{src:t.artist.picture_medium,alt:"img"}),r.a.createElement("h3",null,t.artist.name),r.a.createElement("div",null,t.title),r.a.createElement("button",{className:"next",onClick:c},"Next"),r.a.createElement("button",{className:"close",onClick:function(){a({type:"CHANGE_MODAL",modal:!1}),a({type:"SET_SONG",song:""})}})))}function b(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.modal})),n=Object(m.c)((function(e){return e.song})),c=Object(m.c)((function(e){return e.login})),l=Object(a.useState)(""),s=Object(f.a)(l,2),o=s[0],p=s[1],d=Object(a.useState)(""),b=Object(f.a)(d,2),v=b[0],O=b[1],y=Object(a.useState)(""),j=Object(f.a)(y,2),x=j[0],N=j[1],S=Object(a.useState)([{name:"Pop",id:"132"},{name:"Mix",id:"0"},{name:"Rap",id:"116"},{name:"Rock",id:"152"},{name:"Reggae",id:"144"},{name:"Metal",id:"464"}]),w=Object(f.a)(S,1)[0];function k(){return(k=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=!!(o.length>1&&n.artist.name.toLowerCase().includes(o.toLowerCase())))&&c&&c.length)){e.next=6;break}return e.next=4,fetch("/change",{method:"POST",headers:{"Content-Type":"application/json; charset = utf-8"},body:JSON.stringify({login:c,answer:!0})});case 4:e.next=9;break;case 6:if(t||!c||!c.length){e.next=9;break}return e.next=9,fetch("/change",{method:"POST",headers:{"Content-Type":"application/json; charset = utf-8"},body:JSON.stringify({login:c,answer:!1})});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(""),t.next=3,E();case 3:n=t.sent,e({type:"SET_SONG",song:n}),N(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"SET_GENRE",genre:n.target.id}),N(""),t.next=4,g(n.target.id);case 4:a=t.sent,e({type:"SET_SONG",song:a}),N(a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){N(n)}),[n]),t?r.a.createElement(h,{isCorrect:v}):x?r.a.createElement(r.a.Fragment,null,r.a.createElement("video",{controls:"controls",autoplay:"",name:"media",className:"video"},r.a.createElement("source",{src:x.preview,type:"audio/mpeg"})),r.a.createElement("div",{className:"findContainer"},r.a.createElement("div",{className:"checkAnswer"},r.a.createElement("input",{type:"text",placeholder:"write your answer",onChange:function(e){return p(e.target.value)}}),r.a.createElement("button",{onClick:function(){!function(){k.apply(this,arguments)}(),o.length>1&&n.artist.name.toLowerCase().includes(o.toLowerCase())?O(!0):O(!1),N(""),e({type:"CHANGE_MODAL",modal:!0})}},"Check")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"findContainer"},r.a.createElement("div",{className:"buttons"},w.map((function(e){return"0"!==e.id?r.a.createElement("div",{className:"genresContainer"},r.a.createElement("button",{id:e.id,onClick:T},e.name)):r.a.createElement("div",{className:"genresContainer"},r.a.createElement("button",{onClick:C},e.name))})))))}function v(){return r.a.createElement("div",{className:"homeContainer"},r.a.createElement(b,null))}n(43);function O(e){var t=Object(m.b)(),n=Object(a.useState)(""),c=Object(f.a)(n,2),l=c[0],s=c[1],o=Object(a.useState)(""),p=Object(f.a)(o,2),d=p[0],E=p[1],g=Object(a.useState)(""),h=Object(f.a)(g,2),b=h[0],v=h[1];function O(){return(O=Object(u.a)(i.a.mark((function n(){var a,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!l.length||!d.length){n.next=10;break}return n.next=3,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json; charset = utf-8"},body:JSON.stringify({login:l,password:d})});case 3:return a=n.sent,n.next=6,a.json();case 6:(r=n.sent).user?(localStorage.setItem("login",r.user.login),t({type:"SET_LOGIN",login:r.user.login}),e.history.push("/")):r.err&&v(r.err),n.next=11;break;case 10:v("Fill in all fields");case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.createElement("div",{className:"form sign-in"},r.a.createElement("h2",null,"Welcome back"),r.a.createElement("label",null,r.a.createElement("span",null,"Name"),r.a.createElement("input",{type:"text",onChange:function(e){return s(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){return E(e.target.value)}})),r.a.createElement("button",{type:"button",className:"submit",onClick:function(){return O.apply(this,arguments)}},"Log In"),r.a.createElement("div",{className:"err"},b?r.a.createElement("div",null,b):r.a.createElement(r.a.Fragment,null)))}function y(e){var t=Object(m.b)(),n=Object(a.useState)(""),c=Object(f.a)(n,2),l=c[0],s=c[1],o=Object(a.useState)(""),p=Object(f.a)(o,2),d=p[0],E=p[1],g=Object(a.useState)(""),h=Object(f.a)(g,2),b=h[0],v=h[1],O=Object(a.useState)(""),y=Object(f.a)(O,2),j=y[0],x=y[1];function N(){return(N=Object(u.a)(i.a.mark((function n(){var a,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(l.length&&d.length&&b.length)){n.next=10;break}return n.next=3,fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json; charset = utf-8"},body:JSON.stringify({login:l,email:d,password:b})});case 3:return a=n.sent,n.next=6,a.json();case 6:(r=n.sent).user?(localStorage.setItem("login",r.user.login),t({type:"SET_LOGIN",login:r.user.login}),e.history.push("/")):x("The user already exists"),n.next=11;break;case 10:x("Fill in all fields");case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.createElement("div",{className:"form sign-up"},r.a.createElement("h2",null,"Time to feel like home"),r.a.createElement("label",null,r.a.createElement("span",null,"Name"),r.a.createElement("input",{type:"text",onChange:function(e){return s(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,"Email"),r.a.createElement("input",{type:"email",onChange:function(e){return E(e.target.value)}})),r.a.createElement("label",null,r.a.createElement("span",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){return v(e.target.value)}})),r.a.createElement("button",{type:"button",className:"submit",onClick:function(){return N.apply(this,arguments)}},"Sign Up"),r.a.createElement("div",{className:"err"},j?r.a.createElement("div",null,j):r.a.createElement(r.a.Fragment,null)))}function j(e){function t(){document.querySelector(".cont").classList.toggle("s--signup")}return Object(a.useEffect)((function(){e.purse||document.querySelector(".cont").classList.toggle("s--signup")}),[e.purse]),r.a.createElement("div",{className:"authform"},r.a.createElement("div",{className:"cont"},r.a.createElement(O,e),r.a.createElement("div",{className:"sub-cont"},r.a.createElement("div",{className:"img"},r.a.createElement("div",{className:"img__text m--up"},r.a.createElement("h2",null,"New here?"),r.a.createElement("p",null,"Sign up and and see your progress!")),r.a.createElement("div",{className:"img__text m--in"},r.a.createElement("h2",null,"One of us?"),r.a.createElement("p",null,"If you already has an account, just log in. We've missed you!")),r.a.createElement("div",{className:"img__btn"},r.a.createElement("span",{className:"m--up",onClick:t},"Sign Up"),r.a.createElement("span",{className:"m--in",onClick:t},"Log In"))),r.a.createElement(y,e))))}n(44);function x(){var e=Object(m.c)((function(e){return e.login})),t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],l=n[1];function s(){return(s=Object(u.a)(i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/info",{method:"POST",headers:{"Content-Type":"application/json; charset = utf-8"},body:JSON.stringify({login:e})});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,console.log(a),l(a.user);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(c||function(){s.apply(this,arguments)}(),c){var e=c.correct/(c.correct+c.incorrect)*100;console.log(e,"answeeers"),document.querySelector(".progress-bar").style.width="".concat(e,"%"),document.querySelector(".wrong-progress-bar").style.width="".concat(100-e,"%"),isNaN(e)||0===e?(document.querySelector(".progress-bar").style.display="none",document.querySelector(".wrong-progress-bar").style.width="100%"):100-e===0&&(document.querySelector(".wrong-progress-bar").style.display="none")}})),c?r.a.createElement("div",{className:"account"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h2",null,e),r.a.createElement("div",null,r.a.createElement("div",null,"Answers: ",c.correct+c.incorrect),r.a.createElement("div",null,"Correct answers: ",c.correct),r.a.createElement("div",null,"Inorrect answers: ",c.incorrect))),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar tx"},c.correct),r.a.createElement("div",{className:"wrong-progress-bar tx"},c.incorrect))):r.a.createElement(r.a.Fragment,null)}var N=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(s.a,{render:function(e){return r.a.createElement(d,e)}}),r.a.createElement("div",{className:"content"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:v}),r.a.createElement(s.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(j,e)}}),r.a.createElement(s.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(j,Object.assign({purse:"login"},e))}}),r.a.createElement(s.a,{exact:!0,path:"/account",render:function(e){return r.a.createElement(x,e)}}))))},S=n(13),w=n(15),k={song:"",modal:!1,genre:"0",login:""},C=n(26),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||S.c,T=Object(S.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SONG":return Object(w.a)({},e,{song:t.song});case"CHANGE_MODAL":return Object(w.a)({},e,{modal:t.modal});case"SET_GENRE":return Object(w.a)({},e,{genre:t.genre});case"SET_LOGIN":return Object(w.a)({},e,{login:t.login});default:return e}}),_(Object(S.a)(C.a)));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,null,r.a.createElement(m.a,{store:T},r.a.createElement(N,null)))),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.4f57e7d8.chunk.js.map